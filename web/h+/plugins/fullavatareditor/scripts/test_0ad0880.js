swfobject.addDomLoadEvent(function(){function t(){$("#flash1").data({w:$("#flash1").width(),h:$("#flash1").height()}).css({width:"0px",height:"0px",overflow:"hidden"}),$("#editorPanelButtons,#webcamPanelButton").hide()}function a(){$("#flash1").css({width:$("#flash1").data("w"),height:$("#flash1").data("h")})}function e(){$("#userAlbums").show()}function s(){$("#userAlbums").hide()}var l=!1,i="upload",o=$.Cookie("swf1"),n=$.Cookie("swf2");null==n&&(n="http://www.baidu.com/img/bdlogo.png");var c=function(t){var a=this.id;switch(t.code){case 2:0==t.type?"swf1"==a&&($("#webcamPanelButton").hide(),$("#editorPanelButtons").show()):"swf1"==a&&$("#editorPanelButtons,#webcamPanelButton").hide();break;case 3:0==t.type?"swf1"==a&&($(".button_shutter").removeClass("Disabled"),$("#webcamPanelButton").show(),l=!0):("swf1"==a&&(l=!1,$("#webcamPanelButton").hide()),alert(1==t.type?"用户拒绝使用摄像头!":"摄像头被占用!"));break;case 4:alert("您选择的原图片文件大小（"+t.content+"）超出了指定的值(2MB)。");break;case 5:if(0==t.type){for(var e=$('<div class="imgList"/>'),s=0;s<t.content.avatarUrls.length;s++)e.append("<dl><dt>头像图片"+(s+1)+'</dt><dd><img src="'+t.content.avatarUrls[s]+'" /></dd></dl>');var i=[];t.content.sourceUrl?i.push({text:"修改头像",callback:function(){this.close(),$.Cookie(a,t.content.sourceUrl),location.reload()}}):$.Cookie(a,null),i.push({text:"关闭窗口"}),$.dialog({title:"图片已成功保存至服务器",content:e,button:i,mask:!0,draggable:!1})}else alert(t.type)}},d=new fullAvatarEditor("swf1",335,{id:"swf1",upload_url:"upload.php",src_url:o,tab_visible:!1,button_visible:!1,src_upload:2,checkbox_visible:!1,browse_box_align:38,webcam_box_align:38,avatar_sizes:"258*200",avatar_sizes_desc:"258*200像素",browse_box_align:"left",webcam_box_align:"left",avatar_intro:"     最终会生成下面这个尺寸的头像",avatar_tools_visible:!0},c);$("#avatar-tab li").click(function(){i!=this.id&&(i=this.id,$(this).addClass("active"),$(this).siblings().removeClass("active"),"albums"===this.id?(t(),e()):(s(),a(),"webcam"===this.id?($("#editorPanelButtons").hide(),l&&($(".button_shutter").removeClass("Disabled"),$("#webcamPanelButton").show())):$("#editorPanelButtons,#webcamPanelButton").hide()),d.call("changepanel",this.id))}),$("#src_upload").change(function(){d.call("srcUpload",this.checked)}),$(".button_upload").click(function(){d.call("upload")}),$(".button_cancel").click(function(){var a=$("#avatar-tab li.active")[0].id;"albums"===a?(t(),e()):(d.call("changepanel",a),"webcam"===a?($("#editorPanelButtons").hide(),l&&($(".button_shutter").removeClass("Disabled"),$("#webcamPanelButton").show())):$("#editorPanelButtons,#webcamPanelButton").hide())}),$(".button_shutter").click(function(){$(this).hasClass("Disabled")||($(this).addClass("Disabled"),d.call("pressShutter"))}),$("#userAlbums a").click(function(){var t=this.href;return d.call("loadPic",t),s(),a(),!1});new fullAvatarEditor("swf2",{id:"swf2",upload_url:"upload.php",src_url:n,src_upload:2,avatar_scale:2,avatar_intro:"最终头像的尺寸为以下尺寸 * 2(设置的缩放系数)",avatar_sizes_desc:"100*100像素，缩放系数为2，保存后的大小为200*200像素。|50*50像素，缩放系数为2，保存后的大小为100*100像素。|32*32像素，缩放系数为2，保存后的大小为64*64像素。"},c)});